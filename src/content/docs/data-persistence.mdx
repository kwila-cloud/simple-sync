---
title: Data Persistence
---

## Data Persistence and Backups

This project uses SQLite for persistent storage. By default the service stores its database file in `./data/simple-sync.db` when you run via Docker Compose.

### Running with Docker Compose

The repository ships a `docker-compose.yml` that bind-mounts `./data` into the container (`./data:/app/data`). This keeps the DB file on the host so you can inspect, back up, or move it easily.

### Backups

Use the supplied helper scripts:

- `./scripts/backup.sh [--stop] [--dir <backup-dir>] [path-to-db]` — copies the DB file to `./backups/` (or specified directory) with a timestamped filename. Use `--stop` to stop the container during backup for safety.
- `./scripts/restore.sh <backup-file> [--stop]` — restores a backup into `./data/simple-sync.db`. The existing DB (if any) will be moved aside before restore.

Example workflow:

```bash
# Stop, backup, and start using the scripts
./scripts/backup.sh --stop
docker compose up -d
```

### Security Considerations

- The database file contains sensitive data. Store backups securely and limit filesystem access.
- For production, consider encrypting the filesystem or using SQLCipher (see issue #17).
- Ensure regular backups and test restores periodically.

### Developer notes

- Building the binary with `github.com/mattn/go-sqlite3` requires a C toolchain and headers (`libsqlite3-dev`) and `CGO_ENABLED=1`.


